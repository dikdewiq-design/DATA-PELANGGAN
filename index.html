<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SH Vision - Aplikasi Pelanggan</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f9; margin: 0; padding: 0; }
    header { background: #00875a; color: #fff; padding: 15px; text-align: center; }
    main { max-width: 900px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    form input, form select, form button { display: block; width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 14px; }
    form button { background: #00875a; color: #fff; cursor: pointer; font-weight: bold; }
    form button:hover { background: #006f48; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: 10px; text-align: left; }
    th { background: #f0f0f0; }
    #loginPage { display: flex; height: 100vh; justify-content: center; align-items: center; }
    #loginBox { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.2); width: 300px; }
    #appPage { display: none; }
    .toast { visibility: hidden; min-width: 250px; margin-left: -125px; background: #333; color: #fff; text-align: center; border-radius: 4px; padding: 12px; position: fixed; z-index: 1; left: 50%; bottom: 30px; font-size: 14px; }
    .toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
    @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
    @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
  </style>
</head>
<body>

  <!-- Login Page -->
  <div id="loginPage">
    <div id="loginBox">
      <h2>Login SH Vision</h2>
      <input type="text" id="loginUser" placeholder="Username">
      <input type="password" id="loginPass" placeholder="Password">
      <button onclick="login()">Login</button>
      <p id="loginError" style="color:red; display:none;">Username / Password salah!</p>
    </div>
  </div>

  <!-- App Page -->
  <div id="appPage">
    <header>
      <h1>SH Vision - Data Pelanggan</h1>
    </header>

    <main>
      <form id="pelangganForm">
        <input type="text" id="nama" placeholder="Nama Lengkap" required>
        <input type="text" id="alamat" placeholder="Alamat" required>
        <input type="text" id="telepon" placeholder="Nomor HP" required>
        <input type="email" id="email" placeholder="Email">
        <select id="paket" required>
          <option value="">-- Pilih Paket Internet --</option>
          <option value="Basic 20Mbps">Basic 20Mbps</option>
          <option value="Standard 50Mbps">Standard 50Mbps</option>
          <option value="Premium 100Mbps">Premium 100Mbps</option>
        </select>
        <input type="url" id="foto" placeholder="Link Foto Rumah">
        <input type="url" id="map" placeholder="Link Google Maps">
        <button type="submit">Tambah Data</button>
      </form>

      <table id="tabelPelanggan">
        <thead>
          <tr>
            <th>No</th>
            <th>Nama</th>
            <th>Alamat</th>
            <th>Nomor HP</th>
            <th>Email</th>
            <th>Paket</th>
            <th>Foto Rumah</th>
            <th>Maps</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </main>
  </div>

  <div id="toast" class="toast"></div>

<script>
  const SCRIPT_URL = "https://docs.google.com/spreadsheets/d/1QnmxQGgdfzTFTTyLYEsVhs7JcLM0Plrp8yw5ijuXgqM/edit?usp=sharing"; // ganti dengan URL Web App Google Script
  let counter = 1;

  // Login
  function login() {
    const user = document.getElementById("loginUser").value;
    const pass = document.getElementById("loginPass").value;
    if (user === "kenzonet" && pass === "23456") {
      localStorage.setItem("isLogin", "true");
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("appPage").style.display = "block";
    } else {
      document.getElementById("loginError").style.display = "block";
    }
  }

  // Cek status login
  window.onload = function() {
    if (localStorage.getItem("isLogin") === "true") {
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("appPage").style.display = "block";
    }
  };

  // Form submit
  const form = document.getElementById("pelangganForm");
  const tabelBody = document.querySelector("#tabelPelanggan tbody");

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    const data = {
      nama: document.getElementById("nama").value,
      alamat: document.getElementById("alamat").value,
      telepon: document.getElementById("telepon").value,
      email: document.getElementById("email").value,
      paket: document.getElementById("paket").value,
      foto: document.getElementById("foto").value,
      map: document.getElementById("map").value
    };

    // Tambah ke tabel
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${counter++}</td>
      <td>${data.nama}</td>
      <td>${data.alamat}</td>
      <td>${data.telepon}</td>
      <td>${data.email}</td>
      <td>${data.paket}</td>
      <td><a href="${data.foto}" target="_blank">Lihat Foto</a></td>
      <td><a href="${data.map}" target="_blank">Lihat Map</a></td>
    `;
    tabelBody.appendChild(row);

    // Kirim ke Google Sheets
    fetch(SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify(data)
    })
    .then(res => res.text())
    .then(response => showToast("Data berhasil dikirim ke Google Sheets"))
    .catch(err => showToast("Gagal kirim ke Google Sheets"));

    form.reset();
  });

  // Toast notification
  function showToast(msg) {
    const x = document.getElementById("toast");
    x.innerHTML = msg;
    x.className = "toast show";
    setTimeout(() => { x.className = x.className.replace("show", ""); }, 3000);
  }
</script>
</body>
</html>
